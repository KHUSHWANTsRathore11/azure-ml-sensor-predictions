# Circuit Configuration Files

This directory contains individual circuit configuration files, auto-generated from `../circuits.yaml`.

## File Naming Convention

**Format**: `{PLANT_ID}_{CIRCUIT_ID}.yaml`

**Examples**:
- `PLANT001_CIRCUIT01.yaml`
- `PLANT001_CIRCUIT02.yaml`
- `PLANT002_CIRCUIT01.yaml`

## Generation

These files are automatically generated by:
- **Script**: `scripts/generate_circuit_configs.py`
- **When**: During Azure DevOps build pipeline execution
- **Source**: Master config at `config/circuits.yaml`

### Manual Generation
```bash
python3 scripts/generate_circuit_configs.py
```

## File Structure

Each circuit config contains:

```yaml
plant_id: PLANT001           # Plant identifier
circuit_id: CIRCUIT01        # Circuit identifier
model_name: plant001-circuit01  # Model registry name
description: "Primary cooling system"
features:                    # Sensor features for training
  - temperature
  - pressure
  - vibration
  - current
  - voltage
  - flow_rate
cutoff_date: "2025-11-01"   # Data cutoff date (used as MLTable version)
training_days: 365           # Historical days to train on
forecast_horizon: 7          # Days to forecast ahead
hyperparameters:             # Training hyperparameters
  lstm_units: 64
  learning_rate: 0.001
  epochs: 50
  batch_size: 32
environment_version: "1.0.0" # Environment version to use
```

## Usage in Training Pipeline

These files are referenced in `single-circuit-training.yaml`:

```yaml
inputs:
  circuit_config:
    type: uri_file
    path: config/circuits/PLANT001_CIRCUIT01.yaml
```

## Relationship with MLTable Assets

The `cutoff_date` from each config is used as the MLTable version:

- **MLTable Name**: `{plant_id}_{circuit_id}` (e.g., `PLANT001_CIRCUIT01`)
- **MLTable Version**: `{cutoff_date}` (e.g., `2025-11-01`)
- **Full Reference**: `azureml:PLANT001_CIRCUIT01:2025-11-01`

## DO NOT Edit Manually

⚠️ **These files are auto-generated**. Do not edit them directly.

Instead:
1. Edit the master config: `config/circuits.yaml`
2. Run the generation script or let the pipeline do it
3. Commit the changes

## Current Circuits

Auto-generated files (count: 5):
- PLANT001_CIRCUIT01.yaml
- PLANT001_CIRCUIT02.yaml
- PLANT001_CIRCUIT03.yaml
- PLANT002_CIRCUIT01.yaml
- PLANT002_CIRCUIT02.yaml
