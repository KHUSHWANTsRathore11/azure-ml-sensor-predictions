# Test Environment - Reference Documentation

⚠️ **This file is reference documentation only - not loaded by pipelines**

See `docs/VARIABLE_GROUPS_REFERENCE.md` for complete setup instructions.

---

## Variable Groups

Configure these in **Azure DevOps → Pipelines → Library**:

### mlops-test-variables

Azure ML Test workspace connection:

```yaml
azureServiceConnection: "Azure-MLOps-Test"
subscriptionId: "12345678-1234-1234-1234-123456789012"
resourceGroup: "mlops-test-rg"
workspaceName: "mlops-test-workspace"
location: "eastus"
```

### mlops-registry-variables

Azure ML Registry connection (shared across environments):

```yaml
registryName: "mlops-central-registry"
registryResourceGroup: "mlops-registry-rg"

# Model propagation settings (exponential backoff)
registryPropagationMaxWaitSeconds: 120
registryPropagationInitialDelaySeconds: 2
registryPropagationMaxDelaySeconds: 30
```

---

## Environment Details

**Purpose:** QA validation and pre-production testing

**Branch:** `release/*`

**Pipelines:**
- `test-deployment-pipeline.yml` - Deploy models from registry

**Approval Environment:**
- `test-deployment` - Approvers: QA team

**Note:** Test environment does NOT train models - only deploys from Registry

---

## Azure ML Workspace Settings

**Compute:**
- Scoring: `Standard_DS3_v2`, 0-4 nodes

**Deployment:**
- Auto-deploy: No
- Approval required: Yes
- Canary deployment: Yes (50% traffic)

**Monitoring:**
- Log level: INFO
- Alerts: Enabled (email + Slack)
- Alert channels: QA team, ML team

**Validation Thresholds (stricter):**
```yaml
min_accuracy: 0.80
max_mae: 7.0
max_rmse: 10.0
min_r2_score: 0.75
```

**Alert Thresholds:**
```yaml
model_drift: 0.15
data_drift: 0.20
prediction_latency_ms: 1000
error_rate_percent: 5
```

**Retention:**
- Models: 90 days
- Logs: 30 days
- Datasets: 180 days

---

## Tags

```yaml
environment: "test"
cost_center: "ml-test"
owner: "qa-team"
auto_shutdown: "enabled"
```
