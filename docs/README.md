# MLOps Documentation

Complete documentation for the Azure ML sensor forecasting MLOps pipeline.

## Quick Start

New to the project? Start here:

1. **[Setup Guide](SETUP.md)** - Configure Variable Groups and environments
2. **[Pipeline Overview](PIPELINES.md)** - Understand the 8-stage training pipeline
3. **[Testing](TESTING.md)** - Test with dummy pipelines

## Core Documentation

### Setup & Configuration
- **[SETUP.md](SETUP.md)** - Variable Groups, environments, service connections
- **[REFERENCE.md](REFERENCE.md)** - Quick reference, commands, troubleshooting

### Pipeline Architecture
- **[PIPELINES.md](PIPELINES.md)** - 8-stage training pipeline, deployment flows
- **[VERSIONING.md](VERSIONING.md)** - Environment, component, model, data versioning
- **[APPROVALS.md](APPROVALS.md)** - Approval workflows for promotions

### Operations
- **[MONITORING.md](MONITORING.md)** - Job monitoring, notifications, failure handling
- **[TESTING.md](TESTING.md)** - Dummy pipelines, PR validation, manual testing
- **[BRANCHING.md](BRANCHING.md)** - Git workflow, release process

## Architecture Overview

```
┌─────────────────────────────────────────────────────────────┐
│ Dev Environment (develop branch)                            │
│ ┌─────────────┐  ┌──────────────┐  ┌────────────────┐      │
│ │   Train     │→ │   Register   │→ │   Promote      │      │
│ │   Models    │  │   in Dev     │  │   to Registry  │      │
│ └─────────────┘  └──────────────┘  └────────────────┘      │
└────────────────────────────────┬────────────────────────────┘
                                 │
                                 ▼
┌─────────────────────────────────────────────────────────────┐
│ Azure ML Registry (shared)                                  │
│ - Stores approved models                                    │
│ - Source for Test/Prod deployments                          │
└────────────────────────────────┬────────────────────────────┘
                                 │
                ┌────────────────┴────────────────┐
                ▼                                 ▼
┌──────────────────────────┐    ┌──────────────────────────┐
│ Test (release/* branch)  │    │ Prod (main branch)       │
│ - Deploy from Registry   │    │ - Deploy from Registry   │
│ - QA validation          │    │ - Blue-green deployment  │
└──────────────────────────┘    └──────────────────────────┘
```

## Key Concepts

### Versioning
- **Environment Version** - Python packages (registration only)
- **Component Version** - Pipeline logic (triggers retraining)
- **Model Version** - Auto-generated by Azure ML
- **Delta Version** - Data snapshot version

### Approvals
- **Environment Promotion** - Approve sharing to Registry
- **Model Promotion** - Per-model approval to Registry
- **Test Deployment** - QA approval
- **Prod Deployment** - 2 approvers required

### Monitoring
- **Training Jobs** - Exponential backoff polling
- **Deployments** - Health checks, auto-rollback
- **Notifications** - Teams, email, Azure DevOps

## Common Tasks

### Update Environment Packages
1. Edit `config/environment.yaml` (bump version)
2. Run training pipeline
3. Approve environment promotion
4. No retraining triggered

### Update Pipeline Logic
1. Edit `components/training-pipeline-component.yaml` (bump version)
2. Update `config/circuits.yaml` (pipeline_component_version)
3. Run training pipeline
4. Retraining triggered for all circuits

### Add New Circuit
1. Edit `config/circuits.yaml` (add circuit)
2. Run training pipeline
3. Training triggered for new circuit
4. Approve model promotion

### Deploy to Test
1. Merge to release branch
2. Run test-deployment pipeline
3. Approve deployment
4. QA validation

### Deploy to Production
1. Merge release to main
2. Manually trigger prod-deployment pipeline
3. 2 approvers required
4. Monitor deployment

## Support

**Documentation Issues:**
- Create issue in repository
- Tag with `documentation`

**Pipeline Issues:**
- Check [REFERENCE.md](REFERENCE.md) troubleshooting
- Review Azure ML Studio logs
- Contact ML platform team

**Questions:**
- Check relevant documentation first
- Ask in Teams channel
- Email: ml-team@company.com
